syntax = "proto3";

package search.v1;

option go_package = "github.com/MuhibNayem/Travio/server/api/proto/search/v1";

service SearchService {
  rpc SearchTrips(SearchTripsRequest) returns (SearchTripsResponse);
  rpc SearchStations(SearchStationsRequest) returns (SearchStationsResponse);
}

message SearchTripsRequest {
  string query = 1;
  string from_station_id = 2;
  string to_station_id = 3;
  string date = 4;
  int32 limit = 5;
  int32 offset = 6;
}

message SearchTripsResponse {
  repeated TripResult results = 1;
  int32 total = 2;
}

message TripResult {
  string trip_id = 1;
  string vehicle_type = 2;
  string vehicle_class = 3;
  int64 departure_time = 4;   // Unix timestamp
  int64 arrival_time = 5;     // Unix timestamp
  int64 price_paisa = 6;
  int32 total_seats = 7;
  int32 available_seats = 8;
  string from_station_id = 9;
  string from_station_name = 10;
  string from_city = 11;
  string to_station_id = 12;
  string to_station_name = 13;
  string to_city = 14;
  string date = 15;           // YYYY-MM-DD
  string status = 16;
  string route_id = 17;
}

message SearchStationsRequest {
  string query = 1;
  int32 limit = 2;
}

message SearchStationsResponse {
  repeated StationResult results = 1;
}

message StationResult {
  string station_id = 1;
  string name = 2;
  string location = 3;
  string division = 4;
}
